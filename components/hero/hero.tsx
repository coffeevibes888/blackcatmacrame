'use client';
import { motion } from 'framer-motion';
import Link from 'next/link';
import Image from 'next/image';
import { useState, useEffect } from 'react';

export default function Hero() {
  return (
    <div className="relative w-full min-h-[480px] md:h-[600px] overflow-visible flex items-center justify-center bg-transparent">
      <div className="w-full max-w-7xl mx-auto px-4 flex flex-col md:flex-row justify-start gap-8 md:gap-10 h-full pt-10 pb-10 md:ml-4">
        <div className="flex-1 flex flex-col items-center md:items-start gap-6 mt-0">
          <motion.div
            initial={{ opacity: 0, y: 24 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.8, ease: 'easeOut' }}
            className="text-center md:text-left space-y-3"
          >
            <p className="text-xs tracking-[0.35em] uppercase text-gray-400">Handcrafted with Purpose</p>
            <motion.h1
              className="text-5xl sm:text-6xl md:text-7xl font-semibold tracking-tight bg-gradient-to-r from-fuchsia-300 via-violet-200 to-sky-300 bg-clip-text text-transparent drop-shadow-[0_0_32px_rgba(129,140,248,0.65)]"
              style={{ fontFamily: 'Helvetica Neue, system-ui' }}
              initial={{ opacity: 0, y: 24 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: 0.1, duration: 0.9, ease: 'easeOut' }}
            >
              Macrame Black Cat
            </motion.h1>
            <motion.p
              className="text-sm sm:text-lg text-white/90 max-w-xl mx-auto md:mx-0 font-light"
              initial={{ opacity: 0, y: 16 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: 0.2, duration: 0.7, ease: 'easeOut' }}
            >
              Artisan-crafted macrame jewelry that weaves intention into every knot.
            </motion.p>
          </motion.div>

          <motion.div
            className="flex gap-4"
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.35, duration: 0.6, ease: 'easeOut' }}
          >
            <Link href="/products">
              <motion.button
                whileHover={{ scale: 1.05, y: -2, boxShadow: '0 24px 60px rgba(0,0,0,0.75)' }}
                whileTap={{ scale: 0.97, y: 0, boxShadow: '0 14px 30px rgba(0,0,0,0.6)' }}
                className="relative px-8 py-3 rounded-full font-semibold text-white bg-gradient-to-r from-slate-900 via-slate-800 to-zinc-900 hover:from-zinc-800 hover:via-black hover:to-zinc-800 transition-all duration-300 text-sm sm:text-base shadow-[0_16px_40px_rgba(0,0,0,0.55)] overflow-hidden"
              >
                <span className="relative z-10">Shop New Drops</span>
                <span className="pointer-events-none absolute inset-0 bg-gradient-to-r from-fuchsia-500/0 via-fuchsia-400/15 to-sky-400/0 opacity-0 hover:opacity-100 transition-opacity duration-300" />
              </motion.button>
            </Link>
          </motion.div>

          {/* Social Links */}
          <motion.div
            className="flex gap-5 mt-2"
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.45, duration: 0.6, ease: 'easeOut' }}
          >
            <Link
              href="https://www.instagram.com/macrameblackcat?igsh=MWNzNDFtcHNtcmw5MQ=="
              target="_blank"
              rel="noopener noreferrer"
              className="text-white/70 hover:text-white transition-colors duration-200"
              aria-label="Follow us on Instagram"
            >
              <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path fillRule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clipRule="evenodd" />
              </svg>
            </Link>
            <Link
              href="https://www.facebook.com/share/15WymPEJVyR/"
              target="_blank"
              rel="noopener noreferrer"
              className="text-white/70 hover:text-white transition-colors duration-200"
              aria-label="Follow us on Facebook"
            >
              <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path fillRule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clipRule="evenodd" />
              </svg>
            </Link>
            <Link
              href="https://macrameblackcat.etsy.com"
              target="_blank"
              rel="noopener noreferrer"
              className="text-white/70 hover:text-white transition-colors duration-200"
              aria-label="Visit our Etsy shop"
            >
              <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M8.559 3.89c0-.3.027-.478.209-.561.136-.055.545-.082 1.063-.082h3.272c1.935 0 2.862.136 3.353.518.518.409.709 1.063.927 2.344l.109.6h.627l-.136-4.306H5.56l.027.6.6.082c.709.109 1.009.3 1.145.627.109.273.136.627.136 1.472v12.052c0 .845-.027 1.2-.136 1.472-.136.327-.436.518-1.145.627l-.6.082-.027.6h12.587l.709-4.47h-.627l-.218.763c-.3 1.063-.545 1.69-.927 2.017-.409.355-1.336.491-3.108.491h-2.89c-.709 0-1.063-.027-1.2-.109-.163-.109-.191-.3-.191-.6V12.6h3.108c.927 0 1.418.082 1.663.3.273.245.382.654.491 1.472l.082.6h.627V9.89h-.627l-.082.6c-.109.818-.218 1.227-.491 1.472-.245.218-.736.3-1.663.3H8.559V3.89z"/>
              </svg>
            </Link>
            <Link
              href="https://www.tiktok.com/@macrameblackcat?_r=1&_t=ZS-92sICthIBNN"
              target="_blank"
              rel="noopener noreferrer"
              className="text-white/70 hover:text-white transition-colors duration-200"
              aria-label="Follow us on TikTok"
            >
              <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
              </svg>
            </Link>
            <Link
              href="https://x.com/"
              target="_blank"
              rel="noopener noreferrer"
              className="text-white/70 hover:text-white transition-colors duration-200"
              aria-label="Follow us on X"
            >
              <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
              </svg>
            </Link>
          </motion.div>
        </div>

        <div className="flex-1 flex items-start justify-center w-full pt-2">
          <Product3DRotator />
        </div>
      </div>
    </div>
  );
}

function Product3DRotator() {
  const [index, setIndex] = useState(0);

  const products = [
    { src: '/images/rocken.png', alt: 'Product 1' },
    { src: '/images/rocken2.png', alt: 'Product 2' },
    { src: '/images/rocken1.png', alt: 'Product 3' },
  ];

  useEffect(() => {
    const t = setInterval(() => {
      setIndex((i) => (i + 1) % 3);
    }, 5000);
    return () => clearInterval(t);
  }, []);

  return (
    <div
      className="relative w-full max-w-md aspect-square flex items-center justify-center -mt-6 select-none"
      style={{ perspective: '2000px' }}
    >
      {products.map((product, i) => {
        const isActive = index === i;

        return (
          <motion.div
            key={i}
            className="absolute inset-0 flex items-center justify-center"
            initial={{ opacity: 0, scale: 0.85, rotateY: -65 }}
            animate={{
              opacity: isActive ? 1 : 0,
              scale: isActive ? 1 : 0.6,
              rotateY: isActive ? 0 : -65,
              zIndex: isActive ? 10 : 0,
            }}
            transition={{ duration: 1, ease: 'easeInOut' }}
            style={{ transformStyle: 'preserve-3d', backfaceVisibility: 'hidden' }}
          >
            <motion.div
              className="relative w-full h-full"
              animate={{ rotateY: isActive ? [0, 8, -8, 0] : 0 }}
              transition={{ duration: 6, repeat: Infinity, ease: 'easeInOut' }}
              style={{ transformStyle: 'preserve-3d', backfaceVisibility: 'hidden' }}
            >
              <Image
                src={product.src}
                alt={product.alt}
                fill
                priority={i === 0}
                sizes="(min-width: 1024px) 480px, (min-width: 768px) 400px, 80vw"
                className="object-contain drop-shadow-xl select-none"
              />
            </motion.div>
          </motion.div>
        );
      })}

      {/* Apple-style dots */}
      <div className="absolute bottom-3 flex gap-3 z-20">
        {products.map((_, i) => (
          <button
            key={i}
            onClick={() => setIndex(i)}
            type="button"
            aria-label={`Show product ${i + 1}`}
            className={`min-h-[28px] min-w-[28px] rounded-full border border-black/20 flex items-center justify-center transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-white/90 focus-visible:ring-offset-slate-900 ${
              index === i ? 'bg-black' : 'bg-gray-300/80'
            }`}
          />
        ))}
      </div>
    </div>
  );
}